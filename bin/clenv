#!/usr/bin/env bash

set -euo pipefail

version="0.1.9"

source ${CLENV_ROOT}/lib/clenv.shrc

help() {
  pod2text $0
  exit 1
}

init-env() {
  clenv_init_env ${1:-${CLENV_ENVIRONMENT:-}}
}

list-env() {
  clenv_list_env
}

version() {
  local _verbose=${1:-}
  if [[ $_verbose ]]; then
    echo "clenv - version $version"
  else
    echo $version
  fi
}

command=${1:-}

case "$command" in
  "" | "-h" | "--help" )
    help
    ;;
  "-v" )
    version
    ;;
  "--version" )
    version --verbose
    ;;
  * )
    shift
    ${command} "$@"
    ;;
esac

exit 0

: <<'__EOF__'

=encoding utf8

=head1 NAME

B<clenv> - CLI to control I<clenv> environments

=head1 SYNOPSYS

Initialize an environment:

    clenv init-env $env

Switch environments:

    source lib/clenv.shrc

    # switch and load libraries
    clenv_use $env
    # only switch
    clenv_switch $env

List environments:

    clenv list-env

Help:

    clenv -h|--help|help

Show version:

    clenv -v|--version|version

=head1 DESCRIPTION

TBD.

=head1 SEE ALSO

L<lib/clenv.shrc>

=head1 AUTHORS

YASUTAKE Kiyoshi E<lt>yasutake.kiyoshi@gmail.comE<gt>

=head1 LICENSE

The MIT License (MIT)

Copyright (c) 2016 YASUTAKE Kiyoshi

=cut

__EOF__

